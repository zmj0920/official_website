<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JP柜系列 | 动力柜</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="https://cdn.jsdelivr.net/gh/zmj0920/image_store/blog/favicon.ico">
    <script data-ad-client="ca-pub-7828333725993554" async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="description" content="web前端技术博客,简洁至上,专注web前端学习与总结。JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github等技术文章。">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="code-4kmwjMtj6j">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.15e21e72.css" as="style"><link rel="preload" href="/assets/js/app.45cd046b.js" as="script"><link rel="preload" href="/assets/js/2.909de083.js" as="script"><link rel="preload" href="/assets/js/3.2722a973.js" as="script"><link rel="preload" href="/assets/js/15.e734e14f.js" as="script"><link rel="prefetch" href="/assets/js/10.01efa92a.js"><link rel="prefetch" href="/assets/js/11.e1b33a89.js"><link rel="prefetch" href="/assets/js/12.b5541131.js"><link rel="prefetch" href="/assets/js/13.7096245a.js"><link rel="prefetch" href="/assets/js/14.442127b5.js"><link rel="prefetch" href="/assets/js/16.058c2068.js"><link rel="prefetch" href="/assets/js/17.1eb325f4.js"><link rel="prefetch" href="/assets/js/4.548a2112.js"><link rel="prefetch" href="/assets/js/5.3a6bf326.js"><link rel="prefetch" href="/assets/js/6.67f69742.js"><link rel="prefetch" href="/assets/js/7.64825f36.js"><link rel="prefetch" href="/assets/js/8.fe8b2e18.js"><link rel="prefetch" href="/assets/js/9.23cf1f83.js">
    <link rel="stylesheet" href="/assets/css/0.styles.15e21e72.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open no-sidebar"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://cdn.jsdelivr.net/gh/zmj0920/image_store/blog/logo3.png" alt="动力柜" class="logo"> <span class="site-name can-hide">动力柜</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">网站首页</a></div><div class="nav-item"><a href="/web/" class="nav-link">成功案例</a></div><div class="nav-item"><a href="/admin/" class="nav-link">产品展示</a></div><div class="nav-item"><a href="/technology/" class="nav-link">设备展示</a></div><div class="nav-item"><a href="/cloudcomputing/" class="nav-link">行业资讯</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">关于我们</a></div><div class="nav-item"><a href="/pages/e14099/" class="nav-link">姿势荣誉</a></div><div class="nav-item"><a href="/pages/ad247c4332211551/" class="nav-link">联系我们</a></div><div class="nav-item"><a href="/blog/" class="nav-link">Article timeline</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">网站首页</a></div><div class="nav-item"><a href="/web/" class="nav-link">成功案例</a></div><div class="nav-item"><a href="/admin/" class="nav-link">产品展示</a></div><div class="nav-item"><a href="/technology/" class="nav-link">设备展示</a></div><div class="nav-item"><a href="/cloudcomputing/" class="nav-link">行业资讯</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">关于我们</a></div><div class="nav-item"><a href="/pages/e14099/" class="nav-link">姿势荣誉</a></div><div class="nav-item"><a href="/pages/ad247c4332211551/" class="nav-link">联系我们</a></div><div class="nav-item"><a href="/blog/" class="nav-link">Article timeline</a></div> <!----></nav>  <!----> <div class="sidebar-slot sidebar-slot-bottom"><!-- 正方形 -->
        <ins class="adsbygoogle"
            style="display:block"
            data-ad-client="ca-pub-7828333725993554"
            data-ad-slot="3508773082"
            data-ad-format="auto"
            data-full-width-responsive="true"></ins>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
        </script></div></aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-70a2d273><div class="articleInfo" data-v-70a2d273><ul class="breadcrumbs" data-v-70a2d273><li data-v-70a2d273><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-70a2d273></a></li> <li data-v-70a2d273><a href="/categories/?category=JP%E6%9F%9C%E7%B3%BB%E5%88%97" title="分类" data-v-70a2d273>JP柜系列</a></li> <!----> <!----></ul> <div class="info" data-v-70a2d273><div title="作者" class="author iconfont icon-touxiang" data-v-70a2d273><a href="javascript:;" data-v-70a2d273>admin</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-70a2d273><a href="javascript:;" data-v-70a2d273>2021-11-23</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><!----> <h1><!---->
          JP柜系列
        </h1> <div class="page-slot page-slot-top"><!-- 固定100% * 90px可显示，max-height:90px未见显示-->
       <ins class="adsbygoogle"
            style="display:inline-block;width:100%;max-height:90px"
            data-ad-client="ca-pub-7828333725993554"
            data-ad-slot="6625304284"></ins>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
        </script></div> <div class="theme-vdoing-content content__default"><div class="cardImgListContainer"><div class="card-list"><div class="card-item row-3"><a href="https://xugaoyi.com/" target="_blank"><div class="box-img"><img src="http://www.czfxwy.com/Upload/news/A70B01CF1D974453AE2D49D9C3D8DE41.jpg" class="no-zoom"></div> <div class="box-info"><p class="name">标题</p> <p class="desc">描述内容描述内容描述内容描述内容描述内容描述内容描述内容描述内容</p></div></a></div> <div class="card-item row-3"><a href="https://xugaoyi.com/" target="_blank"><div class="box-img"><img src="http://www.czfxwy.com/Upload/news/7A7D319B195C50B73B0819AFC491DC5F.jpg" class="no-zoom"></div> <div class="box-info"><p class="name">标题</p> <p class="desc">描述内容描述内容描述内容描述内容描述内容描述内容描述内容描述内容</p></div></a></div> <div class="card-item row-3"><a href="https://xugaoyi.com/" target="_blank"><div class="box-img"><img src="http://www.czfxwy.com/Upload/news/6924A1AB4D28BEB222490BCFE19408C9.jpg" class="no-zoom"></div> <div class="box-info"><p class="name">标题</p> <p class="desc">描述内容描述内容描述内容描述内容描述内容描述内容描述内容描述内容</p></div></a></div></div><div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">img</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//www.czfxwy.com/Upload/news/A70B01CF1D974453AE2D49D9C3D8DE41.jpg
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//xugaoyi.com/
  <span class="token key atrule">name</span><span class="token punctuation">:</span> 标题
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> 描述内容描述内容描述内容描述内容描述内容描述内容描述内容描述内容 <span class="token comment"># 描述，可选</span>
  <span class="token comment"># author: Evan Xu # 作者，可选</span>
  <span class="token comment"># avatar: https://cdn.jsdelivr.net/gh/xugaoyi/image_store/blog/20200103123203.jpg # 头像，可选</span>
<span class="token punctuation">-</span> <span class="token key atrule">img</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//www.czfxwy.com/Upload/news/7A7D319B195C50B73B0819AFC491DC5F.jpg
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//xugaoyi.com/
  <span class="token key atrule">name</span><span class="token punctuation">:</span> 标题
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> 描述内容描述内容描述内容描述内容描述内容描述内容描述内容描述内容
  <span class="token comment"># author: Evan Xu</span>
  <span class="token comment"># avatar: https://cdn.jsdelivr.net/gh/xugaoyi/image_store/blog/20200103123203.jpg</span>
<span class="token punctuation">-</span> <span class="token key atrule">img</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//www.czfxwy.com/Upload/news/6924A1AB4D28BEB222490BCFE19408C9.jpg
  <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//xugaoyi.com/
  <span class="token key atrule">name</span><span class="token punctuation">:</span> 标题
  <span class="token key atrule">desc</span><span class="token punctuation">:</span> 描述内容描述内容描述内容描述内容描述内容描述内容描述内容描述内容
  <span class="token comment"># author: Evan Xu</span>
  <span class="token comment"># avatar: https://cdn.jsdelivr.net/gh/xugaoyi/image_store/blog/20200103123203.jpg</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></div><p>很多人喜欢选择APP或网站中的深色模式，也许他们更喜欢这样的外观，或者他们想让自己的眼睛免受疲劳。这篇文章将告诉你如何在网站中实现一个自动的CSS深色模式，根据访客的系统主题来自动响应。</p> <h1>一 cinder各组件</h1> <ol><li>cinder主要组成:</li></ol> <ul><li>#cinder-api</li> <li>#cinder-scheduler</li> <li>#cinder-volume</li></ul> <ol start="2"><li>cinder各组件功能：</li></ol> <p>-#Cinder-api 是 cinder 服务的 endpoint，提供 rest 接口，负责处理 client 请求，并将 RPC 请求发送至 cinder-scheduler 组件。
-#Cinder-scheduler 负责 cinder 请求调度，其核心部分就是 scheduler_driver, 作为 scheduler manager 的 driver，负责 cinder-volume 具体的调度处理，发送 cinder RPC 请求到选择的 cinder-volume。
-#Cinder-volume 负责具体的 volume 请求处理，由不同后端存储提供 volume 存储空间。目前各大存储厂商已经积极地将存储产品的 driver 贡献到 cinder 社区</p> <ol start="3"><li><p>nova与cinder的工作原理类似</p> <p>nova主要组成:</p> <ul><li>#nova-api</li> <li>#nova-scheduler</li> <li>#nova-compute</li> <li>#nova-conductor</li></ul></li></ol> <h1>二 cinder架构图</h1> <p><img src="https://cdn.jsdelivr.net/gh/zmj0920/image_store/blog/1036857-20171208152804531-1236244447.png" alt=""></p> <p>openstack组件间通信:调用各组件api提供的rest接口，组件内通信:基于rpc(远程过程调用)机制，而rpc机制是基于AMQP模型实现的</p> <p>从rpc使用的角度出发，nova，neutron，和cinder的流程是相似的，我们以cinder为例阐述rpc机制</p> <p>[参考链接]<a href="https://www.ibm.com/developerworks/cn/cloud/library/1403_renmm_opestackrpc/" target="_blank" rel="noopener noreferrer">https://www.ibm.com/developerworks/cn/cloud/library/1403_renmm_opestackrpc/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h1>三 RPC机制</h1> <ol><li>Openstack 组件内部的 RPC（Remote Producer Call）机制的实现是基于 AMQP(Advanced Message Queuing Protocol)作为通讯模型，从而满足组件内部的松耦合性。AMQP 是用于异步消息通讯的消息中间件协议，AMQP 模型有四个重要的角色:</li></ol> <ul><li><p>Exchange：根据 Routing key 转发消息到对应的 Message Queue 中</p></li> <li><p>Routing key：用于 Exchange 判断哪些消息需要发送对应的 Message Queue</p></li> <li><p>Publisher：消息发送者，将消息发送的 Exchange 并指明 Routing Key，以便 Message Queue      可以正确的收到消息</p></li> <li><p>Consumer：消息接受者，从 Message Queue 获取消息</p></li></ul> <p>消息发布者 Publisher 将 Message 发送给 Exchange 并且说明 Routing Key。Exchange 负责根据 Message 的 Routing Key 进行路由，将 Message 正确地转发给相应的 Message Queue。监听在 Message Queue 上的 Consumer 将会从 Queue 中读取消息。</p> <p>Routing Key 是 Exchange 转发信息的依据，因此每个消息都有一个 Routing Key 表明可以接受消息的目的地址，而每个 Message Queue 都可以通过将自己想要接收的 Routing Key 告诉 Exchange 进行 binding，这样 Exchange 就可以将消息正确地转发给相应的 Message Queue。</p> <ol start="2"><li>Publisher可以分为4类：</li></ol> <ul><li><p>Direct Publisher发送点对点的消息；</p></li> <li><p>Topic Publisher采用“发布——订阅”模式发送消息；</p></li> <li><p>Fanout Publisher发送广播消息的发送；</p></li> <li><p>Notify Publisher同Topic Publisher，发送 Notification 相关的消息。</p></li></ul> <ol start="3"><li>Exchange可以分为3类：</li></ol> <ul><li><p>1.Direct Exchange根据Routing Key进行精确匹配，只有对应的 Message Queue 会接受到消息；</p></li> <li><p>2.Topic Exchange根据Routing Key进行模式匹配，只要符合模式匹配的Message Queue都会收到消息；</p></li> <li><p>3.Fanout Exchange将消息转发给所有绑定的Message Queue。</p></li></ul> <p>AMQP消息模型</p> <p><img src="https://cdn.jsdelivr.net/gh/zmj0920/image_store/blog/wKiom1fRH4XRvsJ-AAdFsB4SwGg766.png" alt=""></p> <p>RPC 发送请求</p> <p>Client 端发送 RPC 请求由 publisher 发送消息并声明消息地址，consumer 接收消息并进行消息处理，如果需要消息应答则返回处理请求的结果消息。</p> <p>OpenStack RPC 模块提供了 rpc.call，rpc.cast, rpc.fanout_cast 三种 RPC 调用方法，发送和接收 RPC 请求。</p> <p>1.rpc.call 发送 RPC 请求并返回请求处理结果，请求处理流程如图 5 所示，由 Topic Publisher 发送消息，Topic Exchange 根据消息地址进行消息转发至对应的 Message Queue 中，Topic Consumer 监听 Message Queue，发现需要处理的消息则进行消息处理，并由 Direct Publisher 将请求处理结果消息，请求发送方创建 Direct Consumer 监听消息的返回结果</p> <p><strong>图5.RPC.call消息流程</strong></p> <p><img src="https://cdn.jsdelivr.net/gh/zmj0920/image_store/blog/1036857-20171208152449999-548256790.png" alt=""></p> <p>2.rpc.cast 发送 RPC 请求无返回，请求处理流程如图 6 所示，与 rpc.call 不同之处在于，不需要请求处理结果的返回，因此没有 Direct Publisher 和 Direct Consumer 处理。</p> <p><strong>图 6. RPC.cast 消息流程</strong></p> <p><img src="https://cdn.jsdelivr.net/gh/zmj0920/image_store/blog/1036857-20171208152530015-1942875834.png" alt=""></p> <p>3.rpc.fanout_cast 用于发送 RPC 广播信息无返回结果</p> <p><strong>图 7. RPC.fanout 消息处理</strong></p> <p><img src="https://cdn.jsdelivr.net/gh/zmj0920/image_store/blog/1036857-20171208152555890-1135407104.png" alt=""></p></div></div> <div class="page-slot page-slot-bottom"><!-- 横向自适应 -->
        <ins class="adsbygoogle"
            style="display:block"
            data-ad-client="ca-pub-7828333725993554"
            data-ad-slot="6620245489"
            data-ad-format="auto"
            data-full-width-responsive="true"></ins>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
        </script></div> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2021/11/24, 02:10:34</span></div></div> <div class="page-nav-wapper"><!----> <!----></div></div> <!----></main></div> <div class="footer"><div class="icons"></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2020-2021
    <span>前端学习之道 | <a href="https://beian.miit.gov.cn" target="_blank">豫ICP备17038403号-3</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div></div> <!----> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><i class="close-but">×</i> <div><!-- 固定160*160px -->
        <ins class="adsbygoogle"
            style="display:inline-block;max-width:160px;max-height:160px"
            data-ad-client="ca-pub-7828333725993554"
            data-ad-slot="8377369658"></ins>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
        </div></div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.45cd046b.js" defer></script><script src="/assets/js/2.909de083.js" defer></script><script src="/assets/js/3.2722a973.js" defer></script><script src="/assets/js/15.e734e14f.js" defer></script>
  </body>
</html>
